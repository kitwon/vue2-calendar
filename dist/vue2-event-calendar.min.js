/*!
  * vue2-event-calendar.js v0.4.3
  * (c) 2018 Kitwang Chen
  * Released under the MIT License.
  */
"use strict";var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(t,e){return t(e={exports:{}},e.exports),e.exports}var dayjs_min=createCommonjsModule(function(t,e){t.exports=function(){var r="millisecond",o="second",u="minute",h="hour",c="day",d="week",f="month",l="year",n=/^(\d{4})-?(\d{1,2})-?(\d{0,2})(.*?(\d{1,2}):(\d{1,2}):(\d{1,2}))?.?(\d{1,3})?$/,m=/\[.*?\]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,t={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},a=function(t,e,r){var n=String(t);return!n||n.length>=e?t:""+Array(e+1-n.length).join(r)+t},e={padStart:a,padZoneStr:function(t){var e=Math.abs(t),r=Math.floor(e/60),n=e%60;return(t<=0?"+":"-")+a(r,2,"0")+":"+a(n,2,"0")},monthDiff:function(t,e){var r=12*(e.year()-t.year())+(e.month()-t.month()),n=t.clone().add(r,"months"),a=e-n<0,s=t.clone().add(r+(a?-1:1),"months");return Number(-(r+(e-n)/(a?n-s:s-n)))},absFloor:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},prettyUnit:function(t){return{M:f,y:l,w:d,d:c,h:h,m:u,s:o,ms:r}[t]||String(t||"").toLowerCase().replace(/s$/,"")},isUndefined:function(t){return void 0===t}},s="en",i={};i[s]=t;var y=function(t){return t instanceof M},D=function(t,e,r){var n;if(!t)return null;if("string"==typeof t)i[t]&&(n=t),e&&(i[t]=e,n=t);else{var a=t.name;i[a]=t,n=a}return r||(s=n),n},$=function(t,e){if(y(t))return t.clone();var r=e||{};return r.date=t,new M(r)},p=function(t,e){return $(t,{locale:e.$L})},g=e;g.parseLocale=D,g.isDayjs=y,g.wrapper=p;var M=function(){function t(t){this.parse(t)}var e=t.prototype;return e.parse=function(t){var e,r;this.$d=null===(e=t.date)?new Date(NaN):g.isUndefined(e)?new Date:e instanceof Date?e:"string"==typeof e&&/.*[^Z]$/i.test(e)&&(r=e.match(n))?new Date(r[1],r[2]-1,r[3]||1,r[5]||0,r[6]||0,r[7]||0,r[8]||0):new Date(e),this.init(t)},e.init=function(t){this.$y=this.$d.getFullYear(),this.$M=this.$d.getMonth(),this.$D=this.$d.getDate(),this.$W=this.$d.getDay(),this.$H=this.$d.getHours(),this.$m=this.$d.getMinutes(),this.$s=this.$d.getSeconds(),this.$ms=this.$d.getMilliseconds(),this.$L=this.$L||D(t.locale,null,!0)||s},e.$utils=function(){return g},e.isValid=function(){return!("Invalid Date"===this.$d.toString())},e.isLeapYear=function(){return this.$y%4==0&&this.$y%100!=0||this.$y%400==0},e.$compare=function(t){return this.valueOf()-$(t).valueOf()},e.isSame=function(t){return 0===this.$compare(t)},e.isBefore=function(t){return this.$compare(t)<0},e.isAfter=function(t){return 0<this.$compare(t)},e.year=function(){return this.$y},e.month=function(){return this.$M},e.day=function(){return this.$W},e.date=function(){return this.$D},e.hour=function(){return this.$H},e.minute=function(){return this.$m},e.second=function(){return this.$s},e.millisecond=function(){return this.$ms},e.unix=function(){return Math.floor(this.valueOf()/1e3)},e.valueOf=function(){return this.$d.getTime()},e.startOf=function(t,e){var n=this,a=!!g.isUndefined(e)||e,r=function(t,e){var r=p(new Date(n.$y,e,t),n);return a?r:r.endOf(c)},s=function(t,e){return p(n.toDate()[t].apply(n.toDate(),a?[0,0,0,0].slice(e):[23,59,59,999].slice(e)),n)};switch(g.prettyUnit(t)){case l:return a?r(1,0):r(31,11);case f:return a?r(1,this.$M):r(0,this.$M+1);case d:return r(a?this.$D-this.$W:this.$D+(6-this.$W),this.$M);case c:case"date":return s("setHours",0);case h:return s("setMinutes",1);case u:return s("setSeconds",2);case o:return s("setMilliseconds",3);default:return this.clone()}},e.endOf=function(t){return this.startOf(t,!1)},e.$set=function(t,e){switch(g.prettyUnit(t)){case"date":this.$d.setDate(e);break;case f:this.$d.setMonth(e);break;case l:this.$d.setFullYear(e);break;case h:this.$d.setHours(e);break;case u:this.$d.setMinutes(e);break;case o:this.$d.setSeconds(e);break;case r:this.$d.setMilliseconds(e)}return this.init(),this},e.set=function(t,e){return this.clone().$set(t,e)},e.add=function(n,t){var a=this;n=Number(n);var e,r=g.prettyUnit(t),s=function(t,e){var r=a.set("date",1).set(t,e+n);return r.set("date",Math.min(a.$D,r.daysInMonth()))};if(r===f)return s(f,this.$M);if(r===l)return s(l,this.$y);switch(r){case u:e=6e4;break;case h:e=36e5;break;case c:e=864e5;break;case d:e=6048e5;break;case o:e=1e3;break;default:e=1}var i=this.valueOf()+n*e;return p(i,this)},e.subtract=function(t,e){return this.add(-1*t,e)},e.format=function(t){var e=this,r=t||"YYYY-MM-DDTHH:mm:ssZ",n=g.padZoneStr(this.$d.getTimezoneOffset()),a=this.$locale(),s=a.weekdays,i=a.months,o=function(t,e,r,n){return t&&t[e]||r[e].substr(0,n)};return r.replace(m,function(t){if(-1<t.indexOf("["))return t.replace(/\[|\]/g,"");switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return String(e.$y);case"M":return String(e.$M+1);case"MM":return g.padStart(e.$M+1,2,"0");case"MMM":return o(a.monthsShort,e.$M,i,3);case"MMMM":return i[e.$M];case"D":return String(e.$D);case"DD":return g.padStart(e.$D,2,"0");case"d":return String(e.$W);case"dd":return o(a.weekdaysMin,e.$W,s,2);case"ddd":return o(a.weekdaysShort,e.$W,s,3);case"dddd":return s[e.$W];case"H":return String(e.$H);case"HH":return g.padStart(e.$H,2,"0");case"h":case"hh":return 0===e.$H?12:g.padStart(e.$H<13?e.$H:e.$H-12,"hh"===t?2:1,"0");case"a":return e.$H<12?"am":"pm";case"A":return e.$H<12?"AM":"PM";case"m":return String(e.$m);case"mm":return g.padStart(e.$m,2,"0");case"s":return String(e.$s);case"ss":return g.padStart(e.$s,2,"0");case"SSS":return g.padStart(e.$ms,3,"0");case"Z":return n;default:return n.replace(":","")}})},e.diff=function(t,e,r){var n=g.prettyUnit(e),a=$(t),s=this-a,i=g.monthDiff(this,a);switch(n){case l:i/=12;break;case f:break;case"quarter":i/=3;break;case d:i=s/6048e5;break;case c:i=s/864e5;break;case h:i=s/36e5;break;case u:i=s/6e4;break;case o:i=s/1e3;break;default:i=s}return r?i:g.absFloor(i)},e.daysInMonth=function(){return this.endOf(f).$D},e.$locale=function(){return i[this.$L]},e.locale=function(t,e){var r=this.clone();return r.$L=D(t,e,!0),r},e.clone=function(){return p(this.toDate(),this)},e.toDate=function(){return new Date(this.$d)},e.toArray=function(){return[this.$y,this.$M,this.$D,this.$H,this.$m,this.$s,this.$ms]},e.toJSON=function(){return this.toISOString()},e.toISOString=function(){return this.toDate().toISOString()},e.toObject=function(){return{years:this.$y,months:this.$M,date:this.$D,hours:this.$H,minutes:this.$m,seconds:this.$s,milliseconds:this.$ms}},e.toString=function(){return this.$d.toUTCString()},t}();return $.extend=function(t,e){return t(e,M,$),$},$.locale=D,$.isDayjs=y,$.en=i[s],$}()});function getMonthViewStartDay(t,e,r){var n=Number(e),a=dayjs_min(t).startOf(r);return a.day()!==n&&(a=a.subtract(a.day(),"day")),a=a.add(e,"day")}var genBody={methods:{genWeekTitle:function(e){var r=this.prefixCls+"-week-title",n=this.weekDateShort||this.weekLocaleData||this.localeData[this.locale],a=this.firstDay-1,t=n.map(function(t){return 7<=++a&&(a=0),e("div",{class:[r+"-item"]},[n[a]])});return e("div",{class:[r]},[t])},genCalendateItem:function(n){var a=this,s=this.genItemRow(n),i=[];return this.monthData.map(function(t,e){var r=n("div",{class:a.prefixCls+"-day-item"},[a.$scopedSlots.default?a.$scopedSlots.default(t):a.$slots.default]);s.children.push(r),0<e-1&&(e+1)%7==0&&(i.push(s),s=a.genItemRow(n))}),n("div",{class:[this.prefixCls+"-body"]},[i])},genItemRow:function(t){return t("div",{class:[this.prefixCls+"-body-row"]},[])}}},genHeader={props:{renderHeader:Function},computed:{headerDateText:function(){return this.locale?new Date(this.formatedDay.toString()).toLocaleDateString(this.locale,{year:"numeric",month:"numeric"}):"week"===this.mode?dayjs_min(this.formatedDay).startOf("week").format("YYYY-MM-DD")+" - "+dayjs_min(this.formatedDay).endOf("week").format("YYYY-MM-DD"):dayjs_min(this.formatedDay).format("YYYY-MM")}},methods:{genHeaderCenter:function(t){var e=t("a",{class:[this.prefixCls+"-control",this.prefixCls+"-prev"],on:{click:this.prev}},[this.prevNode||"<"]),r=t("a",{class:[this.prefixCls+"-control",this.prefixCls+"-next"],on:{click:this.next}},[this.nextNode||">"]),n=t("span",{class:[this.prefixCls+"-header-date"]},[this.headerDateText]);return this.renderHeader?this.renderHeader({prev:this.prev,next:this.next,selectedDate:this.headerDateText}):t("div",{class:[this.prefixCls+"-header-center"]},[e,n,r])},genHeader:function(t){var e=t("div",{class:[this.prefixCls+"-header-left"]},[this.$slots["header-left"]]),r=t("div",{class:[this.prefixCls+"-header-right"]},[this.$slots["header-right"]]);return t("div",{class:[this.prefixCls+"-header"]},[e,this.genHeaderCenter(t),r])}}},_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},prefixCls="vue-calendar";function checkType(t){return Object.prototype.toString.call(t)}var calendar$1={name:prefixCls,mixins:[genBody,genHeader],props:{startDate:[Number,String,Date],dateData:[Object,Array],matchKey:{type:String,default:"date"},locale:{type:String,default:"en"},firstDay:{type:Number,default:0},mode:{type:String,default:"month",validator:function(t){return"month"===t||"week"===t}},prefixCls:{type:String,default:prefixCls},weekDateShort:Array,onMonthChange:{type:Function,default:function(){}},onPrev:{type:Function,default:function(){}},onNext:{type:Function,default:function(){}},renderHeader:Function,weekLocaleData:Array},computed:{formatedDay:function(){return dayjs_min(new Date(this.currentDay))},monthData:function(){var n=this,a=this.dateData,t=this.formatedDay,e=this.firstDay,r=this.mode,s=this.matchKey,i=this.locale,o=checkType(a);if(!t)return[];var u=getMonthViewStartDay(t,e,r),h=[],c=6;"week"===this.mode&&(c=1);for(var d=function(t){var r=[];if("[object Object]"===o?Object.keys(a).forEach(function(t){var e=t.replace("-","/");u.isSame(dayjs_min(new Date(e)))&&r.push(a[t])}):"[object Array]"===o&&(r=a.filter(function(t){var e=t[s].replace("-","/");return u.isSame(dayjs_min(new Date(e)))})),i){var e=new Date(u);h.push(_extends({},n.getItemStatus(u),{data:r||{},date:{year:u.year(),month:u.month()+1,date:u.date(),day:u.day(),full:u.format("YYYY-MM-DD")},localeDate:{year:e.toLocaleDateString(i,{year:"numeric"}),month:e.toLocaleDateString(i,{month:"numeric"}),date:e.toLocaleDateString(i,{day:"numeric"}),day:u.day(),full:e.toLocaleDateString(i)}}))}else h.push(_extends({},n.getItemStatus(u),{data:r||{},date:{year:u.year(),month:u.month()+1,date:u.date(),day:u.day(),full:u.format("YYYY-MM-DD")}}));u=u.add(1,"day")},f=0;f<7*c;f++)d();return h}},methods:{changeDate:function(t){if("string"!=typeof t&&"[object Date]"!==Object.prototype.toString.call(t))return console.error("invalied date!"),!1;this.currentDay=t},prev:function(){var t=this.formatedDay,e=this.mode,r=this.onPrev,n=this.monthData;this.currentDay=t.subtract(1,e).startOf(e).format("YYYY-MM-DD"),r({startDay:n[0].date,endDay:n[n.length-1].date})},next:function(){var t=this.formatedDay,e=this.mode,r=this.onNext,n=this.monthData;this.currentDay=t.add(1,e).startOf(e).format("YYYY-MM-DD"),r({startDay:n[0].date,endDay:n[n.length-1].date})},getItemStatus:function(t){var e=dayjs_min(t),r=this.formatedDay,n=e.month()===r.month(),a=!n&&e.isBefore(this.formatedDay,"month"),s=!n&&e.isAfter(this.formatedDay,"month");return{isPrevMonth:a,isPrevLastDay:!!a&&e.isSame(e.endOf("month").format("YYYY-MM-DD")),isNextMonth:s,isNextFirstDay:!!s&&e.isSame(e.startOf("month").format("YYYY-MM-DD")),isToday:t.format("YYYY-MM-DD")===dayjs_min(this.today).format("YYYY-MM-DD"),isCurMonth:n}},changeViewData:function(){this.onMonthChange({startDay:this.monthData[0].date,endDay:this.monthData[this.monthData.length-1].date})}},watch:{startDate:{immediate:!0,handler:function(t){this.currentDay=t?new Date(t):new Date,this.today||(this.today=this.currentDay)}},currentDay:{immediate:!0,handler:function(t,e){this.changeViewData()}},mode:function(t){this.changeViewData()}},data:function(){return{today:this.currentDay,currentDay:null,localeData:{"zh-cn":"周日_周一_周二_周三_周四_周五_周六".split("_"),en:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),"fa-ir":"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنجشنبه_جمعه_شنبه".split("_")}}},render:function(t){return t("div",{class:[this.prefixCls,"is-"+this.mode]},[this.genHeader(t),this.genWeekTitle(t),this.genCalendateItem(t)])}};module.exports=calendar$1;